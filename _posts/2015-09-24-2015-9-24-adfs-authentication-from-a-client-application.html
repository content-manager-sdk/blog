---
layout: post
title: ADFS client side authentication (part 1)
categories: []
tags: serviceapi authentication adfs
status: publish
type: post
published: true
meta: {}
---
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1>Note</h1>
<p dir="ltr">In version 8.3 and later it is not required that you update the ServiceAPI itself to support OAuth as it will support it by default.  As long as you send the Bearer token in the Authentication header and set up the &lt;authentication&gt; element in hptrim.config.</p>
<h1>Demo</h1>
<p>In this video I configure the ServiceAPI  to force it to use my ADFS instance for authentication for client side applications.  This is achieved by using the <a href="https://msdn.microsoft.com/en-us/magazine/dn463788.aspx">OWIN </a>framework to enable OAuth2 in the ServiceAPI instance.  I also look briefly at what is required on the ADFS side to make all this work.</p>
<iframe src="https://player.vimeo.com/video/140277282" width="500" height="375" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe><h1>The Code</h1>
<p>Here are the resources I used in the video:</p>
<ul dir="ltr">
<li>The downloadable <a href="https://integrationhprm.codeplex.com/releases/view/617305">DLLs</a>
</li>
<li>The source  <a href="https://integrationhprm.codeplex.com/SourceControl/latest#82/ADFSOAuth/readme.md">code</a>
</li>
</ul>
<p>The command I used to create the ADFS client:</p>
<pre class="source-code"><span class="cm-variable">Add</span><span class="cm-operator">-</span><span class="cm-variable">ADFSClient</span> <span class="cm-operator">-</span><span class="cm-variable">Name</span> <span class="cm-string">"MySAPIClient"</span> <span class="cm-operator">-</span><span class="cm-variable">ClientId</span> <span class="cm-string">"A1CF1107-FF90-4228-93BF-26052DD2C714"</span> <span class="cm-operator">-</span><span class="cm-variable">RedirectUri</span> <span class="cm-string">"https://davidc2012.trim.lab/HPRMServiceAPI/"</span></pre>
</body></html>
